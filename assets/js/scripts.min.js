"use strict";var rox_woo_search=rox_woo_search||{};!function(f,n,u,h){var t,s,x=function(n,o,e,a){clearTimeout(t),s&&(s.abort(),s=!1),t=setTimeout(function(){s=f.get(n,o,function(n,o){e(n,o)}).fail(function(n,o){"function"==typeof a&&a(n,o)})},150)};f(u).ready(function(){f(".rox_wcm_search").each(function(){var a,t,n,s,o,e,r,c,i,l,d;a=f(this),t=a.closest(".rox-search-container"),n=t.find("form.rox-search"),s=t.find(".result-contents"),o=t.find("a.submit"),e=t.find("a.reset"),r="",c={action:h.rox_action,verb:"search",_nonce:h.rox_csrf},i=function(n,o){n.success?s.html(n.data.result):s.html('<p class="alert alert-warning">'+h.rox_error+"</p>")},l=function(n,o){"abort"!==o&&s.html('<p class="alert alert-warning">'+h.rox_error+"</p>")},d=function(n){0<n.find(".rox-icon").length&&n.find(".rox-icon").remove()},t.hasClass("open")&&t.removeClass("open"),a.on("keyup",function(n){var o=n.which?n.which:n.keyCode,e=f(this).val().trim(),a=f.extend({},c,{s:e});-1===[9,13,16,17,18,20,27,33,34,45,47,58,64,91,92,93,96,123,127,144].indexOf(o)&&0<e.length&&e!==r&&(r=e,s.html(h.rox_loading),t.hasClass("open")||t.addClass("open"),x(h.rox_ajax,a,i,l))}),a.on("focus",function(){0<f(this).val().length&&t.addClass("open")}),n.on("keypress",function(n){if(13===(n.which?n.which:n.keyCode))return n.preventDefault(),!1}).on("keyup",function(n){27===(n.which?n.which:n.keyCode)&&t.hasClass("open")&&(t.removeClass("open"),r="")}),o.click(function(n){n.preventDefault();var o=a.val(),e=f.extend({},c,{s:o});0<o.length?(s.html(h.rox_loading),t.hasClass("open")||t.addClass("open"),x(h.rox_ajax,e,i)):a.focus()}),e.click(function(n){n.preventDefault(),t.removeClass("open"),a.val(""),s.html(""),r="",a.blur()}),t.on("click",".rox-wcms-item.simple a.rox-wcms-cart",function(n){n.preventDefault();var o=f(this),e=o.find("span").not(".rox-icon").text(),a=o.closest(".rox-wcms-item"),t={action:h.rox_action,verb:"add-to-cart",_nonce:h.rox_csrf,product_id:a.data("product_id")};if(o.hasClass("disabled"))return!1;d(o),o.addClass("disabled"),o.prepend(h.icons.rox_loading),f.post(h.rox_ajax,t,function(n){d(o),n.success?(a.addClass("in_cart"),o.prepend(h.icons.rox_tick),o.find("span").not(".rox-icon").text(n.data.message)):(alert(n.data.message),o.removeClass("disabled"))}).fail(function(n,o){l(0,o)}).always(function(){setTimeout(function(){d(o),o.find("span").not(".rox-icon").text(e),o.removeClass("disabled")},2500)})}),f(u).on("click",function(n){0==f(n.target).parents(".rox-search-container").length&&t.hasClass("open")&&(t.removeClass("open"),""==a.val().trim()&&(r=""))}),t.click(function(n){})})})}(jQuery,window,document,rox_woo_search);
//# sourceMappingURL=scripts.min.js.map
